# OpenCode IDE - UIç»„ä»¶è§„æ ¼è¯´æ˜ä¹¦ï¼ˆå®Œæ•´ç‰ˆ v1.0ï¼‰

> ç‰ˆæœ¬ï¼šv1.0ï¼ˆå®Œæ•´ç‰ˆï¼‰  
> æ—¥æœŸï¼š2026-02-21  
> ä¸»é¢˜ï¼š**ç™½+ç²‰é…è‰²æ–¹æ¡ˆ**  
> çŠ¶æ€ï¼šåŸºäºç”¨æˆ·ç¡®è®¤çš„è®¾è®¡è§„æ ¼

---

## ğŸ“‹ ç›®å½•

1. [æ‰§è¡Œæ‘˜è¦](#1-æ‰§è¡Œæ‘˜è¦)
2. [ç°æœ‰ç³»ç»Ÿåˆ†æ](#2-ç°æœ‰ç³»ç»Ÿåˆ†æ)
3. [å…¨å±€è®¾è®¡ç³»ç»Ÿ](#3-å…¨å±€è®¾è®¡ç³»ç»Ÿ)
4. [æ ¸å¿ƒç»„ä»¶è§„æ ¼](#4-æ ¸å¿ƒç»„ä»¶è§„æ ¼)
5. [å®æ–½å»ºè®®](#5-å®æ–½å»ºè®®)
6. [é™„å½•](#6-é™„å½•)

---

## 1. æ‰§è¡Œæ‘˜è¦

### 1.1 é¡¹ç›®èƒŒæ™¯

æœ¬é¡¹ç›®æ—¨åœ¨ä¸ºOpenCode IDEé‡æ–°è®¾è®¡ç”¨æˆ·ç•Œé¢ç³»ç»Ÿï¼Œä»æ·±è‰²ä¸»é¢˜åˆ‡æ¢ä¸º**ç™½+ç²‰æµ…è‰²ä¸»é¢˜**ï¼Œå¹¶å¼•å…¥åŒæ‰˜ç›˜æ¶æ„ã€æ™ºèƒ½ä½“ç³»ç»Ÿã€æœ¬åœ°å¤„ç†ç­‰åˆ›æ–°åŠŸèƒ½ã€‚

### 1.2 è®¾è®¡èŒƒå›´

| æ¨¡å— | çŠ¶æ€ | å®Œæˆåº¦ |
|------|------|--------|
| å…¨å±€è®¾è®¡ç³»ç»Ÿï¼ˆç™½+ç²‰ä¸»é¢˜ï¼‰ | âœ… å·²å®Œæˆ | 100% |
| æ‰˜ç›˜ç³»ç»Ÿï¼ˆåŒæ‰˜ç›˜æ¶æ„ï¼‰ | âœ… å·²å®Œæˆ | 100% |
| é¡¹ç›®è‰²å—ä¸å¯¹è¯åˆ—è¡¨ | âœ… å·²å®Œæˆ | 100% |
| æ™ºèƒ½ä½“è®¾ç½®ç³»ç»Ÿ | âœ… å·²å®Œæˆ | 100% |
| æœ¬åœ°å¤„ç†é€‰é¡¹ | âœ… å·²å®Œæˆ | 100% |
| è¾“å…¥æ¡†ä¸ç¼–è¾‘å™¨ | â³ å¾…è®¾è®¡ | 0% |
| æ–‡ä»¶ç®¡ç†å™¨ç´¢å¼•æ˜¾ç¤º | â³ å¾…è®¾è®¡ | 0% |

### 1.3 å…³é”®è®¾è®¡å†³ç­–

| å†³ç­–é¡¹ | é€‰æ‹© | ç†ç”± |
|--------|------|------|
| ä¸»é¢˜é…è‰² | ç™½+ç²‰ | æŸ”å’Œã€ç°ä»£ã€ç¬¦åˆIDEä¸“ä¸šå½¢è±¡ |
| æ‰˜ç›˜æ¶æ„ | å‚ç›´+æ°´å¹³åŒæ‰˜ç›˜ | æœ€å¤§åŒ–ç©ºé—´åˆ©ç”¨ï¼Œæ¸…æ™°åˆ†åŒº |
| æ™ºèƒ½ä½“ç³»ç»Ÿ | 4ä¸ªé»˜è®¤+ç”¨æˆ·è‡ªå®šä¹‰ | è¦†ç›–ä¸»è¦åœºæ™¯ï¼Œæ”¯æŒä¸ªæ€§åŒ– |
| æœ¬åœ°å¤„ç† | æç¤ºè¯é¢„å¤„ç†+ç´¢å¼•ä¼˜åŒ– | æå‡å“åº”è´¨é‡ï¼Œå‡å°‘Tokenæ¶ˆè€— |

---

## 2. ç°æœ‰ç³»ç»Ÿåˆ†æ

### 2.1 ç°æœ‰æ¶æ„æ¦‚è¿°

å½“å‰OpenCode IDEé‡‡ç”¨Electron + Next.jsæŠ€æœ¯æ ˆï¼Œä¸»è¦ç»„ä»¶åŒ…æ‹¬ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Electron ä¸»è¿›ç¨‹                â”‚
â”‚  â”œâ”€ çª—å£ç®¡ç†å™¨ (WindowManager)          â”‚
â”‚  â”œâ”€ æ–‡ä»¶ç³»ç»ŸæœåŠ¡ (FileSystemService)    â”‚
â”‚  â”œâ”€ Git æœåŠ¡ (GitService)              â”‚
â”‚  â””â”€ AI æœåŠ¡ (AIService)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ IPCé€šä¿¡
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Next.js + React æ¸²æŸ“è¿›ç¨‹         â”‚
â”‚  â”œâ”€ src/app/                          â”‚
â”‚  â”‚   â”œâ”€ page.tsx (ä¸»å…¥å£)              â”‚
â”‚  â”‚   â””â”€ layout.tsx (æ ¹å¸ƒå±€)            â”‚
â”‚  â”œâ”€ src/components/                     â”‚
â”‚  â”‚   â”œâ”€ layout/ (å¸ƒå±€ç»„ä»¶)             â”‚
â”‚  â”‚   â”‚   â”œâ”€ ActivityBar.tsx           â”‚
â”‚  â”‚   â”‚   â”œâ”€ Sidebar.tsx               â”‚
â”‚  â”‚   â”‚   â””â”€ StatusBar.tsx             â”‚
â”‚  â”‚   â”œâ”€ window/ (çª—å£ç»„ä»¶)              â”‚
â”‚  â”‚   â”‚   â””â”€ FloatingWindow.tsx        â”‚
â”‚  â”‚   â”œâ”€ chat/ (èŠå¤©ç»„ä»¶)               â”‚
â”‚  â”‚   â”‚   â”œâ”€ ChatPanel.tsx             â”‚
â”‚  â”‚   â”‚   â”œâ”€ ChatInput.tsx             â”‚
â”‚  â”‚   â”‚   â””â”€ ChatHistory.tsx           â”‚
â”‚  â”‚   â”œâ”€ editor/ (ç¼–è¾‘å™¨ç»„ä»¶)           â”‚
â”‚  â”‚   â”‚   â””â”€ EditorPanel.tsx           â”‚
â”‚  â”‚   â”œâ”€ explorer/ (æ–‡ä»¶æµè§ˆå™¨)         â”‚
â”‚  â”‚   â”‚   â””â”€ ExplorerPanel.tsx         â”‚
â”‚  â”‚   â”œâ”€ git/ (Gitç»„ä»¶)                 â”‚
â”‚  â”‚   â”‚   â””â”€ GitPanel.tsx               â”‚
â”‚  â”‚   â””â”€ repository/ (ä»“åº“ç»„ä»¶)          â”‚
â”‚  â”‚       â””â”€ RepositoryPanel.tsx       â”‚
â”‚  â”œâ”€ src/store/                        â”‚
â”‚  â”‚   â””â”€ index.ts (ZustandçŠ¶æ€ç®¡ç†)      â”‚
â”‚  â”œâ”€ src/types/                        â”‚
â”‚  â”‚   â””â”€ index.ts (TypeScriptç±»å‹å®šä¹‰)   â”‚
â”‚  â””â”€ src/hooks/                        â”‚
â”‚      â””â”€ useIPC.ts (IPCé€šä¿¡Hook)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 éœ€è¦ä¿®æ”¹çš„éƒ¨åˆ†ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰

| æ¨¡å— | å½“å‰çŠ¶æ€ | éœ€è¦ä¿®æ”¹ | ä¼˜å…ˆçº§ | é¢„ä¼°å·¥ä½œé‡ |
|------|----------|----------|--------|------------|
| **ActivityBar** | é™æ€ä¾§è¾¹æ  | æ”¹ä¸ºåŒæ‰˜ç›˜æ‚¬æµ®å±•å¼€ç³»ç»Ÿ | ğŸ”´ é«˜ | 3å¤© |
| **ä¸»é¢˜ç³»ç»Ÿ** | æ·±è‰²ä¸»é¢˜ | åˆ‡æ¢ä¸ºç™½+ç²‰æµ…è‰²ä¸»é¢˜ | ğŸ”´ é«˜ | 2å¤© |
| **æ™ºèƒ½ä½“ç³»ç»Ÿ** | ä¸å­˜åœ¨ | æ–°å¢4ä¸ªé»˜è®¤+è‡ªå®šä¹‰æ™ºèƒ½ä½“ | ğŸ”´ é«˜ | 4å¤© |
| **æœ¬åœ°å¤„ç†** | ä¸å­˜åœ¨ | æ–°å¢æç¤ºè¯é¢„å¤„ç†+ç´¢å¼•ä¼˜åŒ– | ğŸŸ¡ ä¸­ | 3å¤© |
| **æ‰˜ç›˜ç³»ç»Ÿ** | ä¸å­˜åœ¨ | æ–°å¢å‚ç›´+æ°´å¹³åŒæ‰˜ç›˜æ¶æ„ | ğŸ”´ é«˜ | 3å¤© |
| **é¡¹ç›®è‰²å—** | ä¸å­˜åœ¨ | æ–°å¢é¡¹ç›®é€‰æ‹©è‰²å—ç³»ç»Ÿ | ğŸŸ¡ ä¸­ | 2å¤© |
| **å¯¹è¯åˆ—è¡¨** | åŸºç¡€å®ç° | å¢å¼ºæ‚¬æµ®å¯¹è¯åˆ—è¡¨+æ‹–æ‹½ | ğŸŸ¡ ä¸­ | 2å¤© |

### 2.3 å¯ä»¥ä¿ç•™çš„éƒ¨åˆ†ï¼ˆæ— éœ€ä¿®æ”¹æˆ–å°‘é‡ä¿®æ”¹ï¼‰

| æ¨¡å— | å½“å‰çŠ¶æ€ | å»ºè®® | ç†ç”± |
|------|----------|------|------|
| **Electronæ¶æ„** | æˆç†Ÿç¨³å®š | âœ… å®Œå…¨ä¿ç•™ | æ¶æ„è®¾è®¡åˆç†ï¼Œæ— éœ€æ”¹åŠ¨ |
| **Next.js + React** | ç°ä»£æ¡†æ¶ | âœ… å®Œå…¨ä¿ç•™ | æŠ€æœ¯æ ˆå…ˆè¿›ï¼Œæ— éœ€å‡çº§ |
| **ZustandçŠ¶æ€ç®¡ç†** | è½»é‡é«˜æ•ˆ | âœ… å®Œå…¨ä¿ç•™ | çŠ¶æ€ç®¡ç†æ¸…æ™°ï¼Œæ— éœ€æ›¿æ¢ |
| **IPCé€šä¿¡å±‚** | ç¨³å®šå¯é  | âœ… å®Œå…¨ä¿ç•™ | é€šä¿¡æœºåˆ¶å®Œå–„ |
| **æ–‡ä»¶ç³»ç»ŸæœåŠ¡** | åŸºç¡€å®ç° | ğŸŸ¡ å°‘é‡å¢å¼º | åŸºç¡€åŠŸèƒ½å®Œå–„ï¼Œä»…éœ€å¢å¼ºç´¢å¼•åŠŸèƒ½ |
| **GitæœåŠ¡** | åŸºç¡€å®ç° | ğŸŸ¡ å°‘é‡å¢å¼º | åŸºç¡€åŠŸèƒ½å®Œå–„ï¼Œä»…éœ€å¢å¼ºUI |
| **ChatåŸºç¡€ç»„ä»¶** | å·²å®ç° | ğŸŸ¡ å°‘é‡å¢å¼º | åŸºç¡€åŠŸèƒ½å­˜åœ¨ï¼Œéœ€å¢å¼ºæ™ºèƒ½ä½“åˆ‡æ¢ |
| **EditoråŸºç¡€ç»„ä»¶** | å ä½å®ç° | ğŸŸ¡ éœ€è¦å®ç° | å·²æœ‰ç»“æ„ï¼Œéœ€é›†æˆMonaco |
| **ExploreråŸºç¡€ç»„ä»¶** | Mockæ•°æ® | ğŸŸ¡ éœ€è¦å®ç° | å·²æœ‰ç»“æ„ï¼Œéœ€è¿æ¥çœŸå®æ–‡ä»¶ç³»ç»Ÿ |

### 2.4 åºŸå¼ƒ/é‡æ„çš„éƒ¨åˆ†

| åºŸå¼ƒå†…å®¹ | æ›¿ä»£æ–¹æ¡ˆ | ç†ç”± |
|----------|----------|------|
| ç°æœ‰ActivityBarå®ç° | å…¨æ–°åŒæ‰˜ç›˜ç³»ç»Ÿ | éœ€æ±‚å®Œå…¨å˜æ›´ï¼Œé‡æ„æˆæœ¬ä½äºæ”¹é€  |
| æ·±è‰²ä¸»é¢˜å˜é‡ | ç™½+ç²‰ä¸»é¢˜å˜é‡ | è®¾è®¡æ–¹å‘å˜æ›´ |
| ç°æœ‰çš„é™æ€ä¾§è¾¹æ å¸ƒå±€ | æ‚¬æµ®å±•å¼€å¼æ‰˜ç›˜ | äº¤äº’æ¨¡å¼å®Œå…¨å˜æ›´ |
| ç°æœ‰çš„çª—å£åˆ›å»ºæŒ‰é’® | é›†æˆåˆ°åŒæ‰˜ç›˜ç³»ç»Ÿ | åŠŸèƒ½æ•´åˆ |

---

## 3. å…¨å±€è®¾è®¡ç³»ç»Ÿ

### 3.1 ç™½+ç²‰é…è‰²æ–¹æ¡ˆï¼ˆæœ€ç»ˆç‰ˆï¼‰

```css
/* ============================================
   ä¸»é¢˜è‰²æ¿ - ç™½+ç²‰é…è‰²æ–¹æ¡ˆï¼ˆæœ€ç»ˆç‰ˆï¼‰
   ============================================ */

:root {
  /* === ä¸»è‰²è°ƒ - ç²‰è‰²ç³» === */
  --color-primary: #ff6b9d;
  --color-primary-hover: #ff5a8a;
  --color-primary-active: #f04d7a;
  --color-primary-light: #ffb8d0;
  --color-primary-lighter: #ffe4ed;
  
  /* === èƒŒæ™¯è‰² - ç™½è‰²ç³» === */
  --color-bg-primary: #ffffff;
  --color-bg-secondary: #fafafa;
  --color-bg-tertiary: #f5f5f5;
  --color-bg-hover: #fff0f3;
  --color-bg-active: #ffe4ed;
  
  /* === è¾¹æ¡†å’Œåˆ†å‰² === */
  --color-border: #ffe4ed;
  --color-border-hover: #ffb8d0;
  --color-border-active: #ff6b9d;
  --color-divider: #fff0f3;
  
  /* === æ–‡å­—é¢œè‰² === */
  --color-text-primary: #1a1a1a;
  --color-text-secondary: #666666;
  --color-text-tertiary: #999999;
  --color-text-inverse: #ffffff;
  --color-text-primary-pink: #ff6b9d;
  
  /* === çŠ¶æ€è‰² === */
  --color-success: #10b981;
  --color-success-light: #d1fae5;
  --color-warning: #f59e0b;
  --color-warning-light: #fef3c7;
  --color-error: #ef4444;
  --color-error-light: #fee2e2;
  --color-info: #ff6b9d;
  --color-info-light: #ffe4ed;
  
  /* === é˜´å½±æ•ˆæœ === */
  --shadow-sm: 0 1px 2px rgba(255, 107, 157, 0.05);
  --shadow-md: 0 4px 6px rgba(255, 107, 157, 0.07);
  --shadow-lg: 0 10px 15px rgba(255, 107, 157, 0.1);
  --shadow-xl: 0 20px 25px rgba(255, 107, 157, 0.15);
  --shadow-pink: 0 4px 12px rgba(255, 107, 157, 0.2);
  --shadow-pink-lg: 0 8px 24px rgba(255, 107, 157, 0.25);
  
  /* === åœ†è§’ === */
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 8px;
  --radius-xl: 12px;
  --radius-full: 9999px;
  --radius-pill: 20px;
  
  /* === è¿‡æ¸¡åŠ¨ç”» === */
  --transition-instant: 50ms;
  --transition-fast: 100ms;
  --transition-normal: 200ms;
  --transition-slow: 300ms;
  --transition-slower: 400ms;
  --transition-slowest: 500ms;
  
  /* === ç¼“åŠ¨å‡½æ•° === */
  --ease-linear: linear;
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
```

### 3.2 å­—ä½“è§„èŒƒ

```css
/* === å­—ä½“æ— === */
--font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif;
--font-mono: 'SF Mono', 'Monaco', 'Cascadia Code', 'Roboto Mono', 'Consolas', 'Courier New', monospace;
--font-display: 'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;

/* === å­—å· === */
--text-2xs: 10px;      /* æå°å· - æ ‡ç­¾ã€å¾½ç«  */
--text-xs: 11px;       /* å°å· - è¾…åŠ©æ–‡å­—ã€æ—¶é—´ */
--text-sm: 12px;       /* å° - èœå•é¡¹ã€æŒ‰é’® */
--text-base: 13px;     /* åŸºç¡€ - æ­£æ–‡ã€åˆ—è¡¨ */
--text-md: 14px;       /* ä¸­ - æ ‡é¢˜ã€å¯¼èˆª */
--text-lg: 16px;       /* å¤§ - å°æ ‡é¢˜ */
--text-xl: 18px;       /* ç‰¹å¤§ - ç« èŠ‚æ ‡é¢˜ */
--text-2xl: 20px;      /* è¶…å¤§ - å¤§æ ‡é¢˜ */
--text-3xl: 24px;      /* æ - ä¸»æ ‡é¢˜ */

/* === å­—é‡ === */
--font-thin: 100;
--font-extralight: 200;
--font-light: 300;
--font-normal: 400;
--font-medium: 500;
--font-semibold: 600;
--font-bold: 700;
--font-extrabold: 800;
--font-black: 900;

/* === è¡Œé«˜ === */
--leading-none: 1;           /* æ— è¡Œè· - ç´§å‡‘ */
--leading-tight: 1.25;       /* ç´§å‡‘ - æ ‡é¢˜ */
--leading-snug: 1.375;       /* ç¨ç´§ - çŸ­æ®µè½ */
--leading-normal: 1.5;       /* æ­£å¸¸ - æ­£æ–‡ */
--leading-relaxed: 1.625;    /* ç¨æ¾ - é•¿æ®µè½ */
--leading-loose: 2;          /* å®½æ¾ - å¼ºè°ƒ */
```

---

## 4. æ ¸å¿ƒç»„ä»¶è§„æ ¼

### 4.1 æ‰˜ç›˜ç³»ç»Ÿï¼ˆTaskBarï¼‰

#### 4.1.1 æ¶æ„æ¦‚è¿°

æ‰˜ç›˜ç³»ç»Ÿé‡‡ç”¨**åŒæ‰˜ç›˜æ¶æ„**ï¼ŒåŒ…å«ï¼š
- **å‚ç›´æ‰˜ç›˜ï¼ˆVertical Trayï¼‰**ï¼šå®½åº¦ç­‰äºé½¿è½®å®½åº¦ï¼ŒåŒ…å«é¡¹ç›®é€‰æ‹©æ å’Œçª—å£é€‰æ‹©æ 
- **æ°´å¹³æ‰˜ç›˜ï¼ˆHorizontal Trayï¼‰**ï¼šé«˜åº¦ä¸ºé½¿è½®é«˜åº¦çš„1/3ï¼ŒåŒ…å«çª—å£å¯„å­˜æ å’Œè¿æ¥çŠ¶æ€æŒ‰é’®

#### 4.1.2 å°ºå¯¸ä¸å¸ƒå±€

```typescript
// æ‰˜ç›˜ç³»ç»Ÿå°ºå¯¸é…ç½®
interface TraySystemDimensions {
  // é½¿è½®ï¼ˆè§¦å‘å™¨ï¼‰
  gear: {
    width: 40px;
    height: 40px;
    position: 'fixed';
    left: 0;
    top: '50%';
    transform: 'translateY(-50%)';
  };
  
  // å‚ç›´æ‰˜ç›˜
  verticalTray: {
    width: 40px;                    // ç­‰äºé½¿è½®å®½åº¦
    height: 'auto';                 // è‡ªé€‚åº”
    maxHeight: 'screenEdge';        // æœ€å¤§åˆ°å±å¹•è¾¹ç¼˜
    position: 'fixed';
    left: 40px;                     // åœ¨é½¿è½®å³ä¾§
    // å±•å¼€æ–¹å‘æ ¹æ®é½¿è½®ä½ç½®è‡ªåŠ¨è°ƒæ•´
  };
  
  // æ°´å¹³æ‰˜ç›˜
  horizontalTray: {
    width: 'auto';                  // è‡ªé€‚åº”
    maxWidth: '30%screen';            // æœ€å¤§å±å¹•å®½åº¦30%
    height: 13px;                   // é½¿è½®é«˜åº¦çš„1/3 (40/3 â‰ˆ 13)
    position: 'fixed';
    left: 40px;                     // ä¸å‚ç›´æ‰˜ç›˜å¯¹é½
    // å±•å¼€æ–¹å‘æ ¹æ®é½¿è½®ä½ç½®è‡ªåŠ¨è°ƒæ•´
  };
}
```

#### 4.1.3 è§†è§‰æ ·å¼ï¼ˆç™½+ç²‰ä¸»é¢˜ï¼‰

```css
/* é½¿è½®æ ·å¼ */
.taskbar-gear {
  width: 40px;
  height: 40px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 0 var(--radius-md) var(--radius-md) 0;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all var(--transition-fast);
  box-shadow: var(--shadow-sm);
}

.taskbar-gear:hover {
  background: var(--color-bg-hover);
  border-color: var(--color-primary-light);
  box-shadow: var(--shadow-md);
}

.taskbar-gear-icon {
  width: 20px;
  height: 20px;
  color: var(--color-text-secondary);
  transition: all var(--transition-fast);
}

.taskbar-gear:hover .taskbar-gear-icon {
  color: var(--color-primary);
  transform: rotate(90deg);
}

/* å‚ç›´æ‰˜ç›˜ */
.vertical-tray {
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border);
  border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
  box-shadow: var(--shadow-lg);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* æ°´å¹³æ‰˜ç›˜ */
.horizontal-tray {
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border);
  border-radius: 0 var(--radius-md) var(--radius-md) 0;
  box-shadow: var(--shadow-md);
  overflow: hidden;
  display: flex;
  flex-direction: row;
  align-items: center;
}
```

#### 4.1.4 äº¤äº’è§„æ ¼

```typescript
// æ‰˜ç›˜ç³»ç»Ÿäº¤äº’é…ç½®
interface TrayInteractionConfig {
  // è§¦å‘æ–¹å¼
  trigger: {
    type: 'hoverGear';              // æ‚¬æµ®åœ¨é½¿è½®ä¸Šè§¦å‘
    delay: 0ms;                     // ç«‹å³è§¦å‘ï¼Œæ— å»¶è¿Ÿ
    zone: 'gearSurface';            // è§¦å‘åŒºåŸŸä¸ºé½¿è½®è¡¨é¢
  };
  
  // å±•å¼€è¡Œä¸º
  expansion: {
    bothTrays: true;                // åŒæ—¶å±•å¼€å‚ç›´å’Œæ°´å¹³æ‰˜ç›˜
    animation: {
      duration: 400ms;
      easing: 'ease-out';
    };
  };
  
  // è‡ªé€‚åº”æ–¹å‘
  direction: {
    strategy: 'autoAdjust';         // æ ¹æ®é½¿è½®ä½ç½®è‡ªåŠ¨è°ƒæ•´
    vertical: {
      nearTop: 'down';              // é è¿‘é¡¶éƒ¨å‘ä¸‹å±•å¼€
      nearBottom: 'up';           // é è¿‘åº•éƒ¨å‘ä¸Šå±•å¼€
      middle: 'auto';             // ä¸­é—´è‡ªåŠ¨é€‰æ‹©
    };
    horizontal: {
      nearLeft: 'right';            // é è¿‘å·¦ä¾§å‘å³å±•å¼€
      nearRight: 'left';          // é è¿‘å³ä¾§å‘å·¦å±•å¼€
      middle: 'auto';             // ä¸­é—´è‡ªåŠ¨é€‰æ‹©
    };
  };
  
  // æ”¶èµ·è¡Œä¸º
  collapse: {
    trigger: 'leaveBothTrays';      // ç¦»å¼€ä¸¤ä¸ªæ‰˜ç›˜åŒºåŸŸ
    delay: 500ms;                   // å»¶è¿Ÿ500msæ”¶èµ·
    exception: 'duringInteraction'; // äº¤äº’ä¸­ä¸æ”¶èµ·
  };
  
  // é½¿è½®ç‚¹å‡»è¡Œä¸º
  gearClick: {
    leftClick: 'openSettingsMenu';  // å·¦é”®æ‰“å¼€è®¾ç½®èœå•
    rightClick: 'openQuickActions'; // å³é”®æ‰“å¼€å¿«æ·æ“ä½œ
  };
}
```

---

## 5. å®æ–½å»ºè®®

### 5.1 å¼€å‘ä¼˜å…ˆçº§

**ç¬¬ä¸€é˜¶æ®µï¼ˆMVP - 2å‘¨ï¼‰**ï¼š
1. ç™½+ç²‰ä¸»é¢˜ç³»ç»Ÿå®ç°
2. åŒæ‰˜ç›˜åŸºç¡€æ¶æ„
3. é¡¹ç›®è‰²å—ä¸åŸºç¡€å¯¹è¯åˆ—è¡¨

**ç¬¬äºŒé˜¶æ®µï¼ˆæ ¸å¿ƒåŠŸèƒ½ - 3å‘¨ï¼‰**ï¼š
1. æ™ºèƒ½ä½“ç³»ç»Ÿï¼ˆ4ä¸ªé»˜è®¤ï¼‰
2. æœ¬åœ°å¤„ç†åŸºç¡€åŠŸèƒ½
3. æ‹–æ‹½äº¤äº’å®Œå–„

**ç¬¬ä¸‰é˜¶æ®µï¼ˆé«˜çº§åŠŸèƒ½ - 2å‘¨ï¼‰**ï¼š
1. ç”¨æˆ·è‡ªå®šä¹‰æ™ºèƒ½ä½“
2. é«˜çº§ç´¢å¼•åŠŸèƒ½
3. æ–‡ä»¶ç®¡ç†å™¨ç´¢å¼•æ˜¾ç¤º

### 5.2 æŠ€æœ¯é€‰å‹å»ºè®®

| åŠŸèƒ½ | æ¨èæ–¹æ¡ˆ | ç†ç”± |
|------|----------|------|
| ä¸»é¢˜åˆ‡æ¢ | CSS Variables + React Context | æ€§èƒ½å¥½ï¼Œæ˜“äºç»´æŠ¤ |
| æ‹–æ‹½ç³»ç»Ÿ | @dnd-kit/core | ç°ä»£åŒ–ï¼Œå¯è®¿é—®æ€§å¥½ |
| åŠ¨ç”»ç³»ç»Ÿ | Framer Motion | å£°æ˜å¼ï¼Œæ€§èƒ½ä¼˜ç§€ |
| çŠ¶æ€ç®¡ç† | Zustand (å·²æœ‰) | è½»é‡ï¼Œç»§ç»­æ²¿ç”¨ |
| æœ¬åœ°æ¨¡å‹ | Ollama SDK | æˆç†Ÿï¼Œç”Ÿæ€å®Œå–„ |
| ç´¢å¼•ç³»ç»Ÿ | æœ¬åœ°å‘é‡æ•°æ®åº“ | å¿«é€Ÿæ£€ç´¢ï¼Œç¦»çº¿å¯ç”¨ |

### 5.3 é£é™©ä¸ç¼“è§£ç­–ç•¥

| é£é™© | å½±å“ | ç¼“è§£ç­–ç•¥ |
|------|------|----------|
| åŒæ‰˜ç›˜æ¶æ„å¤æ‚ | é«˜ | åˆ†é˜¶æ®µå®ç°ï¼Œå…ˆåšå‚ç›´æ‰˜ç›˜ |
| æœ¬åœ°æ¨¡å‹æ€§èƒ½ | ä¸­ | æä¾›äº‘ç«¯å›é€€æ–¹æ¡ˆ |
| ç´¢å¼•å ç”¨ç©ºé—´å¤§ | ä¸­ | æä¾›ç´¢å¼•æ¸…ç†å’Œå‹ç¼©åŠŸèƒ½ |
| ä¸»é¢˜åˆ‡æ¢æ€§èƒ½ | ä½ | ä½¿ç”¨CSS Variablesï¼Œé¿å…é‡æ¸²æŸ“ |

---

## 6. é™„å½•

### 6.1 æœ¯è¯­è¡¨

| æœ¯è¯­ | å®šä¹‰ |
|------|------|
| **æ‰˜ç›˜ï¼ˆTrayï¼‰** | æ‚¬æµ®å±•å¼€çš„UIå®¹å™¨ï¼ŒåŒ…å«å¤šä¸ªåŠŸèƒ½åŒºåŸŸ |
| **å‚ç›´æ‰˜ç›˜** | çºµå‘å¸ƒå±€çš„æ‰˜ç›˜ï¼ŒåŒ…å«é¡¹ç›®é€‰æ‹©æ å’Œçª—å£é€‰æ‹©æ  |
| **æ°´å¹³æ‰˜ç›˜** | æ¨ªå‘å¸ƒå±€çš„æ‰˜ç›˜ï¼ŒåŒ…å«çª—å£å¯„å­˜æ å’Œè¿æ¥çŠ¶æ€æŒ‰é’® |
| **é¡¹ç›®è‰²å—** | ä»£è¡¨é¡¹ç›®çš„åœ†è§’çŸ©å½¢è‰²å—ï¼Œå…·æœ‰éšæœºæˆ–æŒ‡å®šçš„é¢œè‰² |
| **å¯¹è¯åˆ—è¡¨** | æ‚¬æµ®åœ¨é¡¹ç›®è‰²å—ä¸Šæ˜¾ç¤ºçš„å¯¹è¯åˆ—è¡¨é¢æ¿ |
| **æ™ºèƒ½ä½“ï¼ˆAgentï¼‰** | å…·æœ‰ç‰¹å®šèƒ½åŠ›å’Œè§’è‰²çš„AIåŠ©æ‰‹ |
| **æœ¬åœ°å¤„ç†** | åœ¨å‘é€æç¤ºè¯åˆ°äº‘ç«¯æ¨¡å‹å‰è¿›è¡Œçš„æœ¬åœ°é¢„å¤„ç†å’Œä¼˜åŒ– |
| **ç´¢å¼•** | å¯¹é¡¹ç›®æ–‡ä»¶å’Œä»£ç çš„ç»“æ„åŒ–å­˜å‚¨ï¼Œç”¨äºå¿«é€Ÿæ£€ç´¢ |

### 6.2 å‚è€ƒæ–‡æ¡£

- æœ¬è§„æ ¼åŸºäºçš„è®¾è®¡è‰æ¡ˆï¼š
  - `ui-component-specs-v1.md`ï¼ˆåŸå§‹ActivityBarè®¾è®¡ï¼‰
  - `ui-window-registry-specs.md`ï¼ˆçª—å£å¯„å­˜æ ï¼‰
  - `ui-tray-system-v2.md`ï¼ˆåŒæ‰˜ç›˜ç³»ç»Ÿï¼‰
  - `ui-white-pink-theme-v3.md`ï¼ˆç™½+ç²‰ä¸»é¢˜ä¸æ™ºèƒ½ä½“ï¼‰

### 6.3 ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ |
|------|------|----------|
| v0.1 | 2026-02-21 | åŸå§‹ActivityBarè®¾è®¡ |
| v0.2 | 2026-02-21 | æ·»åŠ çª—å£å¯„å­˜æ  |
| v0.3 | 2026-02-21 | ä¿®æ­£ä¸ºåŒæ‰˜ç›˜æ¶æ„ |
| v0.4 | 2026-02-21 | ä¸»é¢˜æ”¹ä¸ºç™½+ç²‰ï¼Œæ·»åŠ æ™ºèƒ½ä½“ç³»ç»Ÿ |
| v1.0 | 2026-02-21 | **æ•´åˆä¸ºå®Œæ•´è§„æ ¼æŠ¥å‘Š** |

---

**æ–‡æ¡£å®Œ**

*æœ€åæ›´æ–°ï¼š2026-02-21*  
*ç‰ˆæœ¬ï¼šv1.0ï¼ˆå®Œæ•´ç‰ˆï¼‰*  
*çŠ¶æ€ï¼šå·²ç¡®è®¤è®¾è®¡è§„æ ¼ï¼Œå¾…å¼€å‘å®æ–½*
